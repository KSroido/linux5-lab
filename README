Linux kernel
============

There are several guides for kernel developers and users. These guides can
be rendered in a number of formats, like HTML and PDF. Please read
Documentation/admin-guide/README.rst first.

In order to build the documentation, use ``make htmldocs`` or
``make pdfdocs``.  The formatted documentation can also be read online at:

    https://www.kernel.org/doc/html/latest/

There are various text files in the Documentation/ subdirectory,
several of them using the Restructured Text markup notation.

Please read the Documentation/process/changes.rst file, as it contains the
requirements for building and running the kernel, and information about
the problems which may result by upgrading your kernel.

============

本项目为江苏大学2022级计算机学院操作系统课程设计指南，可以为后续学弟学妹起到一定借鉴作用

本指南是笔者在完成课设两个月后写成的，可能会遗漏一些配置环境上的细节问题，欢迎使用issue功能提出问题

============

# 正文

首先简单了解一下项目，笔者选择的课设题目是**添加系统调用**（system call），系统调用简单来说就是一个写在系统底层的，可供全局调用的特殊函数入口

至于这个函数入口的特殊之处，留给感兴趣的读者自行解决（推荐读物：操作系统真相还原，了解16位和32位操作系统的话，只需要看这本，64位操作系统对于大部分人来说一般不需要太多了解，如果想要了解可以阅读《一个64位操作系统的设计与实现》）

这个函数既然是操作系统级别的全局函数，我们就需要了解一些定性的执行流的执行过程

请看下图，高地址是内核空间，是操作系统内核独占的，低地址是用户空间（当然这么说只是笼统泛泛而谈的，实际情况会复杂很多，请自行搜索了解）

<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIQAAAIJCAYAAABk9ZWIAAAAAXNSR0IArs4c6QAABKN0RVh0bXhmaWxlACUzQ214ZmlsZSUyMGhvc3QlM0QlMjJhcHAuZGlhZ3JhbXMubmV0JTIyJTIwbW9kaWZpZWQlM0QlMjIyMDIyLTA3LTI2VDAxJTNBMTAlM0E0NS45MTBaJTIyJTIwYWdlbnQlM0QlMjI1LjAlMjAoV2luZG93cyUyME5UJTIwMTAuMCUzQiUyMFdpbjY0JTNCJTIweDY0KSUyMEFwcGxlV2ViS2l0JTJGNTM3LjM2JTIwKEtIVE1MJTJDJTIwbGlrZSUyMEdlY2tvKSUyMENocm9tZSUyRjEwMy4wLjAuMCUyMFNhZmFyaSUyRjUzNy4zNiUyMiUyMGV0YWclM0QlMjI5T0RDalZNb0lIZWx6aW5MRlVUUSUyMiUyMHZlcnNpb24lM0QlMjIyMC4yLjAlMjIlM0UlM0NkaWFncmFtJTIwaWQlM0QlMjIyNWhrOVJGNUdNSHFQTkc4TE1ZOCUyMiUyMG5hbWUlM0QlMjIlRTclQUMlQUMlMjAxJTIwJUU5JUExJUI1JTIyJTNFNVZaTmo5c2dFUDAxSEZ2NTIlMkJTWXIyNHZXMVdLMnFhOUlUT3g2V0lURWJKMjl0Y1hZaHdiMjZ1MFZmZlVVNWpIek1DOGVZT0R3blhaUEVoeUxCNEZCWTRDanpZbzNLQWc4SDBjNkIlMkJEWEZva1RhSVd5Q1dqMXFrSGR1d0ZMT2haOU13b25CeEhKUVJYN09pQ21hZ3F5SlNERVNsRjdib2RCSGRQUFpJY0pzQXVJM3lLZm1OVUZTMktnN1RIUHdMTGklMkI1a1AxbTBPeVhwbkcwbHA0SlFVUSUyQmdjSXZDdFJSQ3RhdXlXUU0zNUhXOHRIRWZYdG05WFV4Q3BYNG40SVg4d0Y5JTJCOGtNUkozc2FQZnJwMTAlMkZaTzV2bG1mQ3pMZGhlVmwwNkJxUTRWeFJNRWclMkJGcTdwZ0NuWkhrcG5kV3ZkY1k0VXF1Ylo4dmJUcFFDcG9YcjJuZjZ0ZXl3WkVDVXBldElzTkNHTkxXTjN6N1hja0ZnT3U0MDRqeFBZNHYlMkJYcWFkQUx5OFFmc0JMY1p3VXF1alR5MGxZbEtuQlpjQ21EaHFuOVlQM2RyTjhI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4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8haIYQMvWcwQnjuImuFEDL0nsEI4bmLrBVCyNB7BiOE5y6yVgghQ+8ZjBCeu8ha/ZUQsrYE3xSBsWFBQ394U43I8SOAEH6bSBshhBS/XzhC+G0ibYQQUvx+4f8B62HwkcgqCB0AAAAASUVORK5CYII=" style="cursor:pointer;max-width:100%;" onclick="(function(img){if(img.wnd!=null&&!img.wnd.closed){img.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&&evt.source==img.wnd){img.wnd.postMessage(decodeURIComponent(img.getAttribute('src')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);img.wnd=window.open('https://viewer.diagrams.net/?client=1&page=0&edit=_blank');}})(this);"/>
